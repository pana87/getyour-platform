<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />

    <link rel="shortcut icon" href="/public/getyour-logo.svg" />
    <title>Energie Plattform Abfrage Technisches</title>


    <style>
      body {
        margin: 0;
        line-height: 1.2;
        font-family: sans-serif;
        padding-bottom: 144px;
      }
    </style>


  </head>
  <body>


    <script type="module">
      import { CheckboxField } from "/js/CheckboxField.js"
      import { FileField } from "/js/FileField.js"
      import { Helper } from "/js/Helper.js"
      import { SelectionField } from "/js/SelectionField.js"
      import { TextAreaField } from "/js/TextAreaField.js"
      import { Request } from "/js/Request.js"

      const fields = []

      const storageName = "funnel"
      let funnel = JSON.parse(window.sessionStorage.getItem(storageName))
      if (funnel === null) {
        {
          const get = {}
          get.url = "/get/funnel/closed/1/"
          get.state = "owner"
          get.localStorageId = await Request.localStorageId()
          get.localStorageEmail = await Request.email()
          get.location = window.location.href
          get.referer = document.referrer
          const res = await Request.middleware(get)

          if (res.status === 200) {
            funnel = JSON.parse(res.response)
            window.sessionStorage.setItem(storageName, JSON.stringify(funnel))
          } else {
            alert("Es wurden keine Funnel Daten gefunden.")
            window.location.assign(`/felix/energie-plattform/qualifizierung/1/`)
            throw new Error("funnel not found")
          }
        }
      }


      const header = document.createElement("header")
      header.style.position = "fixed"
      header.style.bottom = "0"
      header.style.left = "0"
      header.style.backgroundColor = "white"
      header.style.width = "100%"
      header.style.display = "flex"
      header.style.flexWrap = "wrap"
      header.style.alignItems = "center"
      header.style.zIndex = "1"
      header.style.justifyContent = "space-between"
      header.style.boxShadow = "0 -3px 5px rgba(0, 0, 0, 0.13)"

      const leftContainer = document.createElement("div")
      leftContainer.style.display = "flex"
      leftContainer.style.alignItems = "center"
      leftContainer.style.flexWrap = "wrap"

      const logo = document.createElement("img")
      logo.src = "/felix/shs/public/ep-logo.svg"
      logo.alt = "Energie Plattform"
      logo.style.width = "55px"
      logo.style.margin = "21px 0 21px 34px"
      logo.style.cursor = "pointer"
      logo.addEventListener("click", () => window.history.back())
      leftContainer.append(logo)

      const name = document.createElement("div")
      name.innerHTML = "Energie Plattform"
      name.style.padding = "21px 34px"
      name.style.fontSize = "21px"
      // name.style.color = "#7bc043"
      name.style.cursor = "pointer"
      name.addEventListener("click", () => {



        Helper.popup(overlay => {

          const header = document.createElement("div")
          header.style.position = "fixed"
          header.style.bottom = "0"
          header.style.left = "0"
          header.style.width = "100%"
          header.style.display = "flex"
          header.style.justifyContent = "flex-start"
          header.style.alignItems = "center"
          header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
          header.style.background = "white"
          header.style.cursor = "pointer"
          header.addEventListener("click", () => Helper.removeOverlay(overlay))

          const logo = document.createElement("img")
          logo.src = "/felix/shs/public/ep-logo.svg"
          logo.alt = "Energie Plattform"
          logo.style.width = "55px"
          logo.style.margin = "21px 34px"
          header.append(logo)
          const title = document.createElement("div")
          title.innerHTML = `/ ${window.location.pathname.split("/")[3]} /`
          title.style.fontWeight = "bold"
          title.style.fontSize = "21px"
          header.append(title)
          overlay.append(header)



          const buttons = document.createElement("div")
          buttons.style.overflow = "auto"
          buttons.style.paddingBottom = "144px"

          {
            const button = document.createElement("div")
            button.style.display = "flex"
            button.style.flexWrap = "wrap"
            button.style.justifyContent = "space-between"
            button.style.alignItems = "center"
            button.style.margin = "21px 34px"
            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
            button.style.borderRadius = "13px"
            button.style.border = "0.3px solid black"
            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
            button.style.cursor = "pointer"
            button.addEventListener("click", () => window.location.assign(`/felix/energie-plattform/qualifizierung/1/`))

            const icon = document.createElement("img")
            icon.style.margin = "13px 34px"
            icon.style.width = "34px"
            icon.src = "/public/refresh.svg"
            icon.alt = "Neustart"
            button.append(icon)

            const title = document.createElement("div")
            title.innerHTML = "Neustart"
            title.style.margin = "21px 34px"
            title.style.fontSize = "21px"
            button.append(title)

            buttons.append(button)
          }

          {
            const button = document.createElement("div")
            button.style.display = "flex"
            button.style.flexWrap = "wrap"
            button.style.justifyContent = "space-between"
            button.style.alignItems = "center"
            button.style.margin = "21px 34px"
            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
            button.style.borderRadius = "13px"
            button.style.border = "0.3px solid black"
            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
            button.style.cursor = "pointer"
            button.addEventListener("click", () => window.location.assign(`/felix/energie-plattform/abfrage-haus/1/`))

            const icon = document.createElement("img")
            icon.style.margin = "13px 34px"
            icon.style.width = "34px"
            icon.src = "/public/refresh.svg"
            icon.alt = "Neustart"
            button.append(icon)

            const title = document.createElement("div")
            title.innerHTML = "Angaben zum Haus"
            title.style.margin = "21px 34px"
            title.style.fontSize = "21px"
            button.append(title)

            buttons.append(button)
          }


          {
            const button = document.createElement("div")
            button.style.display = "flex"
            button.style.flexWrap = "wrap"
            button.style.justifyContent = "space-between"
            button.style.alignItems = "center"
            button.style.margin = "21px 34px"
            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
            button.style.borderRadius = "13px"
            button.style.border = "0.3px solid black"
            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
            button.style.cursor = "pointer"
            button.addEventListener("click", () => window.location.assign(`/felix/energie-plattform/abfrage-heizung/1/`))

            const icon = document.createElement("img")
            icon.style.margin = "13px 34px"
            icon.style.width = "34px"
            icon.src = "/public/refresh.svg"
            icon.alt = "Neustart"
            button.append(icon)

            const title = document.createElement("div")
            title.innerHTML = "Angaben zur Heizung"
            title.style.margin = "21px 34px"
            title.style.fontSize = "21px"
            button.append(title)

            buttons.append(button)
          }

          {
            const button = document.createElement("div")
            button.style.display = "flex"
            button.style.flexWrap = "wrap"
            button.style.justifyContent = "space-between"
            button.style.alignItems = "center"
            button.style.margin = "21px 34px"
            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
            button.style.borderRadius = "13px"
            button.style.border = "0.3px solid black"
            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
            button.style.cursor = "pointer"
            button.addEventListener("click", () => window.location.assign(`/felix/energie-plattform/abfrage-strom/1/`))

            const icon = document.createElement("img")
            icon.style.margin = "13px 34px"
            icon.style.width = "34px"
            icon.src = "/public/refresh.svg"
            icon.alt = "Neustart"
            button.append(icon)

            const title = document.createElement("div")
            title.innerHTML = "Angaben zum Strom"
            title.style.margin = "21px 34px"
            title.style.fontSize = "21px"
            button.append(title)

            buttons.append(button)
          }


          {
            const button = document.createElement("div")
            button.style.display = "flex"
            button.style.flexWrap = "wrap"
            button.style.justifyContent = "space-between"
            button.style.alignItems = "center"
            button.style.margin = "21px 34px"
            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
            button.style.borderRadius = "13px"
            button.style.border = "0.3px solid black"
            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
            button.style.cursor = "pointer"
            button.addEventListener("click", () => window.location.reload())

            const icon = document.createElement("img")
            icon.style.margin = "13px 34px"
            icon.style.width = "34px"
            icon.src = "/public/refresh.svg"
            icon.alt = "Neustart"
            button.append(icon)

            const title = document.createElement("div")
            title.innerHTML = "Angaben zur technischen Ausstattung"
            title.style.margin = "21px 34px"
            title.style.fontSize = "21px"
            button.append(title)

            buttons.append(button)
          }


          {
            const button = document.createElement("div")
            button.style.display = "flex"
            button.style.flexWrap = "wrap"
            button.style.justifyContent = "space-between"
            button.style.alignItems = "center"
            button.style.margin = "21px 34px"
            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
            button.style.borderRadius = "13px"
            button.style.border = "0.3px solid black"
            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
            button.style.cursor = "pointer"
            button.addEventListener("click", async () => {

              try {
                for (let i = 0; i < fields.length; i++) {
                  await fields[i].withValidValue()
                }
              } catch (error) {
                alert(`Feld '${error.fieldName}' ist notwendig.`)
                Helper.removeOverlay(overlay)
                document.getElementById(error.fieldName).scrollIntoView({behavior: 'smooth'})
                return
              }

              try {
                Helper.addOverlay()
                Helper.setWaitCursor()
                const funnel = JSON.parse(window.sessionStorage.getItem(storageName))
                {
                  const register = {}
                  register.url = "/register/funnel/closed/1/"
                  register.funnel = funnel
                  register.localStorageId = await Request.localStorageId()
                  register.localStorageEmail = await Request.email()
                  register.location = window.location.href
                  register.referer = document.referrer
                  const res = await Request.middleware(register)

                  if (res.status === 200) {
                    alert("Speichern erfolgreich..")
                    window.sessionStorage.removeItem(storageName)
                    window.location.assign(`/felix/energie-plattform/angebot-vergleich/1/`)
                  }
                }

              } catch (error) {
                alert("Fehler.. Bitte wiederholen.")
                window.location.reload()
              }

            })

            const icon = document.createElement("img")
            icon.style.margin = "13px 34px"
            icon.style.width = "34px"
            icon.src = "/public/proceed-2.svg"
            icon.alt = "Weiter"
            button.append(icon)

            const title = document.createElement("div")
            title.innerHTML = "Speichern und Weiter"
            title.style.margin = "21px 34px"
            title.style.fontSize = "21px"
            button.append(title)

            buttons.append(button)
          }



          {
            const button = document.createElement("div")
            button.style.display = "flex"
            button.style.flexWrap = "wrap"
            button.style.justifyContent = "space-between"
            button.style.alignItems = "center"
            button.style.margin = "21px 34px"
            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
            button.style.borderRadius = "13px"
            button.style.border = "0.3px solid black"
            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
            button.style.cursor = "pointer"
            button.addEventListener("click", () => window.location.assign("/pana/getyour/nutzervereinbarung/"))

            const icon = document.createElement("img")
            icon.style.margin = "13px 34px"
            icon.style.width = "34px"
            icon.src = "/public/handshake.svg"
            icon.alt = "Nutzervereinbarung"
            button.append(icon)

            const title = document.createElement("div")
            title.innerHTML = "Nutzervereinbarung"
            title.style.margin = "21px 34px"
            title.style.fontSize = "21px"
            button.append(title)

            buttons.append(button)
          }

          {
            const button = document.createElement("div")
            button.style.display = "flex"
            button.style.flexWrap = "wrap"
            button.style.justifyContent = "space-between"
            button.style.alignItems = "center"
            button.style.margin = "21px 34px"
            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
            button.style.borderRadius = "13px"
            button.style.border = "0.3px solid black"
            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
            button.style.cursor = "pointer"
            button.addEventListener("click", () => window.location.assign("/pana/getyour/datenschutz/"))

            const icon = document.createElement("img")
            icon.style.margin = "13px 34px"
            icon.style.width = "34px"
            icon.src = "/public/security.svg"
            icon.alt = "Sicherheit"
            button.append(icon)

            const title = document.createElement("div")
            title.innerHTML = "Datenschutz Richtilinien"
            title.style.margin = "21px 34px"
            title.style.fontSize = "21px"
            button.append(title)

            buttons.append(button)
          }
          {
            const button = document.createElement("div")
            button.style.display = "flex"
            button.style.flexWrap = "wrap"
            button.style.justifyContent = "space-between"
            button.style.alignItems = "center"
            button.style.margin = "21px 34px"
            button.style.backgroundColor = "rgba(255, 255, 255, 0.6)"
            button.style.borderRadius = "13px"
            button.style.border = "0.3px solid black"
            button.style.boxShadow = "0 3px 6px rgba(0, 0, 0, 0.16)"
            button.style.cursor = "pointer"
            button.addEventListener("click", () => window.location.assign("/pana/getyour/impressum/"))

            const icon = document.createElement("img")
            icon.style.margin = "13px 34px"
            icon.style.width = "34px"
            icon.src = "/public/company.svg"
            icon.alt = "Unternehmen"
            button.append(icon)

            const title = document.createElement("div")
            title.innerHTML = "Impressum"
            title.style.margin = "21px 34px"
            title.style.fontSize = "21px"
            button.append(title)

            buttons.append(button)
          }

          overlay.append(buttons)

        })


      })
      leftContainer.append(name)
      header.append(leftContainer)
      document.body.append(header)


      {
        const title = document.createElement("h1")
        title.innerHTML = "Angaben zur technischen Ausstattung"
        title.style.margin = "21px 34px"
        title.style.fontWeight = "normal"
        document.body.append(title)
      }


      const technischesWlan = new SelectionField("technischesWlan", document.body)
      .withLabel(label => label.innerHTML = "LAN Verbindung am Speicher vorhanden")
      .withOptions(["Ja", "Nein"])
      .onInfoClick(() => {


        Helper.popup(overlay => {


          const header = document.createElement("div")
          header.style.position = "fixed"
          header.style.bottom = "0"
          header.style.left = "0"
          header.style.width = "100%"
          header.style.display = "flex"
          header.style.justifyContent = "flex-start"
          header.style.alignItems = "center"
          header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
          header.style.background = "white"
          header.style.cursor = "pointer"
          header.addEventListener("click", () => Helper.removeOverlay(overlay))

          const logo = document.createElement("img")
          logo.src = "/felix/shs/public/ep-logo.svg"
          logo.alt = "Energie Plattform"
          logo.style.width = "55px"
          logo.style.margin = "21px 34px"
          header.append(logo)
          const title = document.createElement("div")
          title.innerHTML = "Wissenswertes"
          title.style.fontWeight = "bold"
          title.style.fontSize = "21px"
          header.append(title)
          overlay.append(header)


          const content = document.createElement("div")
          content.style.overflow = "auto"
          content.style.display = "flex"
          content.style.flexDirection = "column"
          content.style.justifyContent = "space-between"
          content.style.minHeight = "100vh"
          {

            {
              const info = document.createElement("div")
              info.style.margin = "21px 34px"
              info.style.lineHeight = "1.4"
              info.style.fontSize = "21px"
              info.innerHTML = "Eine LAN Verbindung ist eine kabelgebundene Verbindung, die das Energiesystem mit dem Internet verbindet. Diese Verbindung ist wichtig, da sie den Datenaustausch zwischen dem Energiesystem und anderen GerÃ¤ten ermÃ¶glicht. Wenn keine LAN Verbindung am Speicherort vorhanden ist, mÃ¼ssen alternative LÃ¶sungen gefunden werden, um eine stabile und effiziente Verbindung zu gewÃ¤hrleisten."
              content.append(info)
            }

            const buttons = document.createElement("div")
            buttons.style.display = "flex"
            buttons.style.justifyContent = "space-between"
            buttons.style.margin = "34px"
            buttons.style.paddingBottom = "144px"

            {
              const button = document.createElement("div")
              button.innerHTML = "ðŸ‘Ž"
              button.style.display = "flex"
              button.style.justifyContent = "center"
              button.style.alignItems = "center"
              button.style.width = "89px"
              button.style.height = "55px"
              button.style.background = "rgb(204,50,50)"
              button.style.borderRadius = "8px"
              button.style.fontSize = "21px"
              button.style.cursor = "pointer"
              button.addEventListener("click", () => Helper.removeOverlay(overlay))
              buttons.append(button)
            }
            {
              const button = document.createElement("div")
              button.innerHTML = "ðŸ‘"
              button.style.background = "rgb(45,201,55)"
              button.style.display = "flex"
              button.style.justifyContent = "center"
              button.style.alignItems = "center"
              button.style.height = "55px"
              button.style.width = "89px"
              button.style.color = "white"
              button.style.borderRadius = "8px"
              button.style.fontSize = "21px"
              button.style.cursor = "pointer"
              button.addEventListener("click", () => Helper.removeOverlay(overlay))
              buttons.append(button)
            }

            content.append(buttons)
          }
          overlay.append(content)
        })


      })
      .onInput(async() => {
        technischesWlan.withStorage(value => {
          funnel[technischesWlan.name] = value
          window.sessionStorage.setItem(storageName, JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel[name])
      technischesWlan.withStorage(value => {
        funnel[technischesWlan.name] = value
        window.sessionStorage.setItem(storageName, JSON.stringify(funnel))
      })
      fields.push(technischesWlan)


      const technischesErdkabel = new SelectionField("technischesErdkabel", document.body)
      .withLabel(label => label.innerHTML = "Vorhandene StromzufÃ¼hrung")
      .withOptions(["Erdkabel", "Freileitung"])
      .onInfoClick(() => {


        Helper.popup(overlay => {


          const header = document.createElement("div")
          header.style.position = "fixed"
          header.style.bottom = "0"
          header.style.left = "0"
          header.style.width = "100%"
          header.style.display = "flex"
          header.style.justifyContent = "flex-start"
          header.style.alignItems = "center"
          header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
          header.style.background = "white"
          header.style.cursor = "pointer"
          header.addEventListener("click", () => Helper.removeOverlay(overlay))

          const logo = document.createElement("img")
          logo.src = "/felix/shs/public/ep-logo.svg"
          logo.alt = "Energie Plattform"
          logo.style.width = "55px"
          logo.style.margin = "21px 34px"
          header.append(logo)
          const title = document.createElement("div")
          title.innerHTML = "Wissenswertes"
          title.style.fontWeight = "bold"
          title.style.fontSize = "21px"
          header.append(title)
          overlay.append(header)


          const content = document.createElement("div")
          content.style.overflow = "auto"
          content.style.display = "flex"
          content.style.flexDirection = "column"
          content.style.justifyContent = "space-between"
          content.style.minHeight = "100vh"
          {

            {
              const img = document.createElement("img")
              img.src = "/felix/shs/public/freileitungunderdkabel.svg"
              img.alt = "Freileitung und Erdkabel"
              img.style.width = "100%"
              img.style.maxWidth = "344px"
              content.append(img)
            }

            {
              const info = document.createElement("div")
              info.style.margin = "21px 34px"
              info.style.lineHeight = "1.4"
              info.style.fontSize = "21px"
              info.innerHTML = "Eine Freileitung ist eine Stromleitung, die Ã¼ber Masten und Strommasten lÃ¤uft, wÃ¤hrend ein Erdkabel unter der Erde verlegt wird. Eine Freileitung kann anfÃ¤lliger fÃ¼r BeschÃ¤digungen durch WettereinflÃ¼sse oder UnfÃ¤lle sein und eine hÃ¶here Wartung erfordern. Sie mÃ¼ssen sicherstellen, dass das Energiesystem so ausgelegt ist, dass es auch bei StromausfÃ¤llen oder anderen Unterbrechungen im Stromnetz stabil und effektiv arbeitet."
              content.append(info)
            }

            const buttons = document.createElement("div")
            buttons.style.display = "flex"
            buttons.style.justifyContent = "space-between"
            buttons.style.margin = "34px"
            buttons.style.paddingBottom = "144px"

            {
              const button = document.createElement("div")
              button.innerHTML = "ðŸ‘Ž"
              button.style.display = "flex"
              button.style.justifyContent = "center"
              button.style.alignItems = "center"
              button.style.width = "89px"
              button.style.height = "55px"
              button.style.background = "rgb(204,50,50)"
              button.style.borderRadius = "8px"
              button.style.fontSize = "21px"
              button.style.cursor = "pointer"
              button.addEventListener("click", () => Helper.removeOverlay(overlay))
              buttons.append(button)
            }
            {
              const button = document.createElement("div")
              button.innerHTML = "ðŸ‘"
              button.style.background = "rgb(45,201,55)"
              button.style.display = "flex"
              button.style.justifyContent = "center"
              button.style.alignItems = "center"
              button.style.height = "55px"
              button.style.width = "89px"
              button.style.color = "white"
              button.style.borderRadius = "8px"
              button.style.fontSize = "21px"
              button.style.cursor = "pointer"
              button.addEventListener("click", () => Helper.removeOverlay(overlay))
              buttons.append(button)
            }

            content.append(buttons)
          }
          overlay.append(content)
        })


      })
      .onInput(async() => {
        technischesErdkabel.withStorage(value => {
          funnel[technischesErdkabel.name] = value
          window.sessionStorage.setItem(storageName, JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel[name])
      technischesErdkabel.withStorage(value => {
        funnel[technischesErdkabel.name] = value
        window.sessionStorage.setItem(storageName, JSON.stringify(funnel))
      })
      fields.push(technischesErdkabel)


      const technischesPotentialAusgleich = new SelectionField("technischesPotentialAusgleich", document.body)
      .withLabel(label => label.innerHTML = "Potentialausgleichsschiene inkl. Fundamenterder vorhanden")
      .withOptions(["Ja", "Nein"])
      .onInfoClick(() => {


        Helper.popup(overlay => {


          const header = document.createElement("div")
          header.style.position = "fixed"
          header.style.bottom = "0"
          header.style.left = "0"
          header.style.width = "100%"
          header.style.display = "flex"
          header.style.justifyContent = "flex-start"
          header.style.alignItems = "center"
          header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
          header.style.background = "white"
          header.style.cursor = "pointer"
          header.addEventListener("click", () => Helper.removeOverlay(overlay))

          const logo = document.createElement("img")
          logo.src = "/felix/shs/public/ep-logo.svg"
          logo.alt = "Energie Plattform"
          logo.style.width = "55px"
          logo.style.margin = "21px 34px"
          header.append(logo)
          const title = document.createElement("div")
          title.innerHTML = "Wissenswertes"
          title.style.fontWeight = "bold"
          title.style.fontSize = "21px"
          header.append(title)
          overlay.append(header)


          const content = document.createElement("div")
          content.style.overflow = "auto"
          content.style.display = "flex"
          content.style.flexDirection = "column"
          content.style.justifyContent = "space-between"
          content.style.minHeight = "100vh"
          {

            {
              const img = document.createElement("img")
              img.src = "/felix/shs/public/potentialausgleichschiene.svg"
              img.alt = "Potentialausgleichsschiene und Fundamenterder"
              img.style.width = "100%"
              img.style.maxWidth = "344px"
              content.append(img)
            }

            {
              const info = document.createElement("div")
              info.style.margin = "21px 34px"
              info.style.lineHeight = "1.4"
              info.style.fontSize = "21px"
              info.innerHTML = "Eine Potentialausgleichsschiene ist eine elektrische Verbindung zwischen allen leitfÃ¤higen Teilen in einem GebÃ¤ude, die einen mÃ¶glichen Unterschied in den elektrischen Potentialen ausgleichen soll. Der Fundamenterder ist ein tief im Boden verankertes metallisches Bauteil, das ebenfalls eine Verbindung zu den leitfÃ¤higen Teilen im GebÃ¤ude herstellt und so eine sichere Ableitung von FehlstrÃ¶men gewÃ¤hrleistet. Wenn die Potentialausgleichsschiene und der Fundamenterder nicht vorhanden oder nicht ausreichend dimensioniert sind, kann dies zu gefÃ¤hrlichen FehlstrÃ¶men fÃ¼hren. Dies kann nicht nur gefÃ¤hrlich sein, sondern auch das System beschÃ¤digen und den Betrieb beeintrÃ¤chtigen."
              content.append(info)
            }

            const buttons = document.createElement("div")
            buttons.style.display = "flex"
            buttons.style.justifyContent = "space-between"
            buttons.style.margin = "34px"
            buttons.style.paddingBottom = "144px"

            {
              const button = document.createElement("div")
              button.innerHTML = "ðŸ‘Ž"
              button.style.display = "flex"
              button.style.justifyContent = "center"
              button.style.alignItems = "center"
              button.style.width = "89px"
              button.style.height = "55px"
              button.style.background = "rgb(204,50,50)"
              button.style.borderRadius = "8px"
              button.style.fontSize = "21px"
              button.style.cursor = "pointer"
              button.addEventListener("click", () => Helper.removeOverlay(overlay))
              buttons.append(button)
            }
            {
              const button = document.createElement("div")
              button.innerHTML = "ðŸ‘"
              button.style.background = "rgb(45,201,55)"
              button.style.display = "flex"
              button.style.justifyContent = "center"
              button.style.alignItems = "center"
              button.style.height = "55px"
              button.style.width = "89px"
              button.style.color = "white"
              button.style.borderRadius = "8px"
              button.style.fontSize = "21px"
              button.style.cursor = "pointer"
              button.addEventListener("click", () => Helper.removeOverlay(overlay))
              buttons.append(button)
            }

            content.append(buttons)
          }
          overlay.append(content)
        })


      })
      .onInput(async() => {
        technischesPotentialAusgleich.withStorage(value => {
          funnel[technischesPotentialAusgleich.name] = value
          window.sessionStorage.setItem(storageName, JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel[name])
      technischesPotentialAusgleich.withStorage(value => {
        funnel[technischesPotentialAusgleich.name] = value
        window.sessionStorage.setItem(storageName, JSON.stringify(funnel))
      })
      fields.push(technischesPotentialAusgleich)


      const technischesHakBild = new FileField("technischesHakBild", document.body)
      .withLabel(label => label.innerHTML = "Hausanschlusskasten")
      .withType(file => {
        file.accept = "image/jpeg, image/png"
        file.required = true
      })
      .onInfoClick(() => {


        Helper.popup(overlay => {


          const header = document.createElement("div")
          header.style.position = "fixed"
          header.style.bottom = "0"
          header.style.left = "0"
          header.style.width = "100%"
          header.style.display = "flex"
          header.style.justifyContent = "flex-start"
          header.style.alignItems = "center"
          header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
          header.style.background = "white"
          header.style.cursor = "pointer"
          header.addEventListener("click", () => Helper.removeOverlay(overlay))

          const logo = document.createElement("img")
          logo.src = "/felix/shs/public/ep-logo.svg"
          logo.alt = "Energie Plattform"
          logo.style.width = "55px"
          logo.style.margin = "21px 34px"
          header.append(logo)
          const title = document.createElement("div")
          title.innerHTML = "Wissenswertes"
          title.style.fontWeight = "bold"
          title.style.fontSize = "21px"
          header.append(title)
          overlay.append(header)


          const content = document.createElement("div")
          content.style.overflow = "auto"
          content.style.display = "flex"
          content.style.flexDirection = "column"
          content.style.justifyContent = "space-between"
          content.style.minHeight = "100vh"
          {

            {
              const img = document.createElement("img")
              img.src = "/felix/shs/public/hausanschlusskasten.svg"
              img.alt = "Hausanschlusskasten"
              img.style.width = "100%"
              img.style.maxWidth = "344px"
              content.append(img)
            }

            const buttons = document.createElement("div")
            buttons.style.display = "flex"
            buttons.style.justifyContent = "space-between"
            buttons.style.margin = "34px"
            buttons.style.paddingBottom = "144px"

            {
              const button = document.createElement("div")
              button.innerHTML = "ðŸ‘Ž"
              button.style.display = "flex"
              button.style.justifyContent = "center"
              button.style.alignItems = "center"
              button.style.width = "89px"
              button.style.height = "55px"
              button.style.background = "rgb(204,50,50)"
              button.style.borderRadius = "8px"
              button.style.fontSize = "21px"
              button.style.cursor = "pointer"
              button.addEventListener("click", () => Helper.removeOverlay(overlay))
              buttons.append(button)
            }
            {
              const button = document.createElement("div")
              button.innerHTML = "ðŸ‘"
              button.style.background = "rgb(45,201,55)"
              button.style.display = "flex"
              button.style.justifyContent = "center"
              button.style.alignItems = "center"
              button.style.height = "55px"
              button.style.width = "89px"
              button.style.color = "white"
              button.style.borderRadius = "8px"
              button.style.fontSize = "21px"
              button.style.cursor = "pointer"
              button.addEventListener("click", () => Helper.removeOverlay(overlay))
              buttons.append(button)
            }

            content.append(buttons)
          }
          overlay.append(content)
        })


      })
      .onInput(() => {
        technischesHakBild.withStorage(async value => {

          let array = []
          const allowedMimeTypes = ["image/jpeg", "image/png"]
          const allowedExtensions = ["jpg", "jpeg", "png"]
          for (let i = 0; i < value.length; i++) {


            await Helper.verifyFileMimeTypes(value[i], allowedMimeTypes)
            .catch(error => {
              alert(`Erlaubte Bildformate: ${allowedExtensions.join(", ")}`)
              Helper.setNotValidStyle(document.querySelector(technischesHakBild.inputSelector))
              throw error
            })

            await Helper.verifyFileExtension(value[i], allowedExtensions)
            .catch(error => {
              alert(`Erlaubte Bildformate: ${allowedExtensions.join(", ")}`)
              Helper.setNotValidStyle(document.querySelector(technischesHakBild.inputSelector))
              throw error
            })

            const dataUrl = await Helper.convertImageFileToDataUrl(value[i])
            const dataUrlSize = Helper.calculateDataUrlSize(dataUrl)
            if (dataUrlSize > 1024 * 1024) {
              alert("Bild ist zu groÃŸ.")
              Helper.setNotValidStyle(document.querySelector(technischesHakBild.inputSelector))
              throw new Error("image too large")
            }

            array.push({
              name: value[i].name,
              type: value[i].type,
              size: dataUrlSize,
              lastModified: Date.now(),
              dataUrl: dataUrl,
            })

          }

          if (array.length > 0) {
            funnel[technischesHakBild.name] = array
            window.sessionStorage.setItem(storageName, JSON.stringify(funnel))
          }

        })
      })
      .fromStorage((name) => funnel[name])
      technischesHakBild.withStorage(async value => {


        let array = []
        const allowedMimeTypes = ["image/jpeg", "image/png"]
        const allowedExtensions = ["jpg", "jpeg", "png"]
        for (let i = 0; i < value.length; i++) {


          await Helper.verifyFileMimeTypes(value[i], allowedMimeTypes)
          .catch(error => {
            alert(`Erlaubte Bildformate: ${allowedExtensions.join(", ")}`)
            Helper.setNotValidStyle(document.querySelector(technischesHakBild.inputSelector))
            throw error
          })

          await Helper.verifyFileExtension(value[i], allowedExtensions)
          .catch(error => {
            alert(`Erlaubte Bildformate: ${allowedExtensions.join(", ")}`)
            Helper.setNotValidStyle(document.querySelector(technischesHakBild.inputSelector))
            throw error
          })

          const dataUrl = await Helper.convertImageFileToDataUrl(value[i])
          const dataUrlSize = Helper.calculateDataUrlSize(dataUrl)
          if (dataUrlSize > 1024 * 1024) {
            alert("Bild ist zu groÃŸ.")
            Helper.setNotValidStyle(document.querySelector(technischesHakBild.inputSelector))
            throw new Error("image too large")
          }

          array.push({
            name: value[i].name,
            type: value[i].type,
            size: dataUrlSize,
            lastModified: Date.now(),
            dataUrl: dataUrl,
          })

        }

        if (array.length > 0) {
          funnel[technischesHakBild.name] = array
          window.sessionStorage.setItem(storageName, JSON.stringify(funnel))
        }

      })
      fields.push(technischesHakBild)


      const technischesAnzahlHaks = new SelectionField("technischesAnzahlHaks", document.body)
      .withLabel(label => label.innerHTML = "Wieviele HAKs haben Sie")
      .withOptions(["1", "0", "2", "mehr als 2"])
      .onInfoClick(() => {


        Helper.popup(overlay => {


          const header = document.createElement("div")
          header.style.position = "fixed"
          header.style.bottom = "0"
          header.style.left = "0"
          header.style.width = "100%"
          header.style.display = "flex"
          header.style.justifyContent = "flex-start"
          header.style.alignItems = "center"
          header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
          header.style.background = "white"
          header.style.cursor = "pointer"
          header.addEventListener("click", () => Helper.removeOverlay(overlay))

          const logo = document.createElement("img")
          logo.src = "/felix/shs/public/ep-logo.svg"
          logo.alt = "Energie Plattform"
          logo.style.width = "55px"
          logo.style.margin = "21px 34px"
          header.append(logo)
          const title = document.createElement("div")
          title.innerHTML = "Wissenswertes"
          title.style.fontWeight = "bold"
          title.style.fontSize = "21px"
          header.append(title)
          overlay.append(header)


          const content = document.createElement("div")
          content.style.overflow = "auto"
          content.style.display = "flex"
          content.style.flexDirection = "column"
          content.style.justifyContent = "space-between"
          content.style.minHeight = "100vh"
          {

            {
              const info = document.createElement("div")
              info.style.margin = "21px 34px"
              info.style.lineHeight = "1.4"
              info.style.fontSize = "21px"
              info.innerHTML = "Ein Hausanschlusskasten ist ein wichtiger Bestandteil des Stromnetzes in einem GebÃ¤ude. Er dient als Verteiler fÃ¼r den Strom, der von auÃŸen Ã¼ber das Stromnetz ins Haus kommt, und leitet ihn zu den einzelnen Verbrauchern im GebÃ¤ude weiter. Wenn mehrere HausanschlusskÃ¤sten vorhanden sind, bedeutet dies, dass das GebÃ¤ude mÃ¶glicherweise in mehrere Stromkreise unterteilt ist. Dies kann die Installation von Energiesystemen wie Photovoltaik mit Speicher, WÃ¤rmepumpen und Solarthermie beeintrÃ¤chtigen. Jeder Stromkreis muss separat betrachtet werden, um sicherzustellen, dass das Energiesystem ordnungsgemÃ¤ÃŸ installiert werden kann und keine Probleme verursacht."
              content.append(info)
            }

            const buttons = document.createElement("div")
            buttons.style.display = "flex"
            buttons.style.justifyContent = "space-between"
            buttons.style.margin = "34px"
            buttons.style.paddingBottom = "144px"

            {
              const button = document.createElement("div")
              button.innerHTML = "ðŸ‘Ž"
              button.style.display = "flex"
              button.style.justifyContent = "center"
              button.style.alignItems = "center"
              button.style.width = "89px"
              button.style.height = "55px"
              button.style.background = "rgb(204,50,50)"
              button.style.borderRadius = "8px"
              button.style.fontSize = "21px"
              button.style.cursor = "pointer"
              button.addEventListener("click", () => Helper.removeOverlay(overlay))
              buttons.append(button)
            }
            {
              const button = document.createElement("div")
              button.innerHTML = "ðŸ‘"
              button.style.background = "rgb(45,201,55)"
              button.style.display = "flex"
              button.style.justifyContent = "center"
              button.style.alignItems = "center"
              button.style.height = "55px"
              button.style.width = "89px"
              button.style.color = "white"
              button.style.borderRadius = "8px"
              button.style.fontSize = "21px"
              button.style.cursor = "pointer"
              button.addEventListener("click", () => Helper.removeOverlay(overlay))
              buttons.append(button)
            }

            content.append(buttons)
          }
          overlay.append(content)
        })


      })
      .onInput(async() => {
        technischesAnzahlHaks.withStorage(value => {
          funnel[technischesAnzahlHaks.name] = value
          window.sessionStorage.setItem(storageName, JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel[name])
      technischesAnzahlHaks.withStorage(value => {
        funnel[technischesAnzahlHaks.name] = value
        window.sessionStorage.setItem(storageName, JSON.stringify(funnel))
      })
      fields.push(technischesAnzahlHaks)


      const technischesHakStandort = new SelectionField("technischesHakStandort", document.body)
      .withLabel(label => label.innerHTML = "Standort des Hausanschlusses")
      .withOptions(["Keller", "Erdgeschoss", "Obergeschoss", "Dachgeschoss", "Treppenhaus", "Andere"])
      .onInfoClick(() => {


        Helper.popup(overlay => {


          const header = document.createElement("div")
          header.style.position = "fixed"
          header.style.bottom = "0"
          header.style.left = "0"
          header.style.width = "100%"
          header.style.display = "flex"
          header.style.justifyContent = "flex-start"
          header.style.alignItems = "center"
          header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
          header.style.background = "white"
          header.style.cursor = "pointer"
          header.addEventListener("click", () => Helper.removeOverlay(overlay))

          const logo = document.createElement("img")
          logo.src = "/felix/shs/public/ep-logo.svg"
          logo.alt = "Energie Plattform"
          logo.style.width = "55px"
          logo.style.margin = "21px 34px"
          header.append(logo)
          const title = document.createElement("div")
          title.innerHTML = "Wissenswertes"
          title.style.fontWeight = "bold"
          title.style.fontSize = "21px"
          header.append(title)
          overlay.append(header)


          const content = document.createElement("div")
          content.style.overflow = "auto"
          content.style.display = "flex"
          content.style.flexDirection = "column"
          content.style.justifyContent = "space-between"
          content.style.minHeight = "100vh"
          {

            {
              const info = document.createElement("div")
              info.style.margin = "21px 34px"
              info.style.lineHeight = "1.4"
              info.style.fontSize = "21px"
              info.innerHTML = "Wenn man ein Energiesystem wie Photovoltaik mit Speicher, WÃ¤rmepumpen und Solarthermie in einem GebÃ¤ude installiert, muss man in der Lage sein, es an den Stromkreis anzuschlieÃŸen, der den Hausanschlusskasten speist. Aus diesem Grund ist es wichtig zu wissen, wo sich der Hausanschlusskasten im GebÃ¤ude befindet und welche Verbraucher an ihn angeschlossen sind. DarÃ¼ber hinaus kann die Position des Hausanschlusskastens auch Auswirkungen auf die Installation des Energiesystems haben. Wenn sich der Hausanschlusskasten beispielsweise in einem Bereich befindet, der schwer zugÃ¤nglich ist oder sich in einem ungÃ¼nstigen Bereich befindet, kann dies die Installation des Energiesystems erschweren."
              content.append(info)
            }

            const buttons = document.createElement("div")
            buttons.style.display = "flex"
            buttons.style.justifyContent = "space-between"
            buttons.style.margin = "34px"
            buttons.style.paddingBottom = "144px"

            {
              const button = document.createElement("div")
              button.innerHTML = "ðŸ‘Ž"
              button.style.display = "flex"
              button.style.justifyContent = "center"
              button.style.alignItems = "center"
              button.style.width = "89px"
              button.style.height = "55px"
              button.style.background = "rgb(204,50,50)"
              button.style.borderRadius = "8px"
              button.style.fontSize = "21px"
              button.style.cursor = "pointer"
              button.addEventListener("click", () => Helper.removeOverlay(overlay))
              buttons.append(button)
            }
            {
              const button = document.createElement("div")
              button.innerHTML = "ðŸ‘"
              button.style.background = "rgb(45,201,55)"
              button.style.display = "flex"
              button.style.justifyContent = "center"
              button.style.alignItems = "center"
              button.style.height = "55px"
              button.style.width = "89px"
              button.style.color = "white"
              button.style.borderRadius = "8px"
              button.style.fontSize = "21px"
              button.style.cursor = "pointer"
              button.addEventListener("click", () => Helper.removeOverlay(overlay))
              buttons.append(button)
            }

            content.append(buttons)
          }
          overlay.append(content)
        })


      })
      .onInput(async() => {
        technischesHakStandort.withStorage(value => {
          funnel[technischesHakStandort.name] = value
          window.sessionStorage.setItem(storageName, JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel[name])
      technischesHakStandort.withStorage(value => {
        funnel[technischesHakStandort.name] = value
        window.sessionStorage.setItem(storageName, JSON.stringify(funnel))
      })
      fields.push(technischesHakStandort)


      const technischesHakFrei = new CheckboxField("technischesHakFrei", document.body)
      .withLabel(label => label.innerHTML = "Der HAK ist frei zugÃ¤nglich bzw. Baufreiheit gegeben")
      .withAfterCheckbox(after => after.innerHTML = "Ja, HAK ist frei zugÃ¤nglich.")
      .withType(checkbox => checkbox.required = true)
      .onInfoClick(() => {


        Helper.popup(overlay => {


          const header = document.createElement("div")
          header.style.position = "fixed"
          header.style.bottom = "0"
          header.style.left = "0"
          header.style.width = "100%"
          header.style.display = "flex"
          header.style.justifyContent = "flex-start"
          header.style.alignItems = "center"
          header.style.boxShadow = "0px 5px 10px rgba(0, 0, 0, 0.5)"
          header.style.background = "white"
          header.style.cursor = "pointer"
          header.addEventListener("click", () => Helper.removeOverlay(overlay))

          const logo = document.createElement("img")
          logo.src = "/felix/shs/public/ep-logo.svg"
          logo.alt = "Energie Plattform"
          logo.style.width = "55px"
          logo.style.margin = "21px 34px"
          header.append(logo)
          const title = document.createElement("div")
          title.innerHTML = "Wissenswertes"
          title.style.fontWeight = "bold"
          title.style.fontSize = "21px"
          header.append(title)
          overlay.append(header)


          const content = document.createElement("div")
          content.style.overflow = "auto"
          content.style.display = "flex"
          content.style.flexDirection = "column"
          content.style.justifyContent = "space-between"
          content.style.minHeight = "100vh"
          {

            {
              const info = document.createElement("div")
              info.style.margin = "21px 34px"
              info.style.lineHeight = "1.4"
              info.style.fontSize = "21px"
              info.innerHTML = "Zum Beispiel: Kein Kleiderschrank davor. Falls verschlossen: HAK muss am Montagetag geÃ¶ffnet sein."
              content.append(info)
            }

            const buttons = document.createElement("div")
            buttons.style.display = "flex"
            buttons.style.justifyContent = "space-between"
            buttons.style.margin = "34px"
            buttons.style.paddingBottom = "144px"

            {
              const button = document.createElement("div")
              button.innerHTML = "ðŸ‘Ž"
              button.style.display = "flex"
              button.style.justifyContent = "center"
              button.style.alignItems = "center"
              button.style.width = "89px"
              button.style.height = "55px"
              button.style.background = "rgb(204,50,50)"
              button.style.borderRadius = "8px"
              button.style.fontSize = "21px"
              button.style.cursor = "pointer"
              button.addEventListener("click", () => Helper.removeOverlay(overlay))
              buttons.append(button)
            }
            {
              const button = document.createElement("div")
              button.innerHTML = "ðŸ‘"
              button.style.background = "rgb(45,201,55)"
              button.style.display = "flex"
              button.style.justifyContent = "center"
              button.style.alignItems = "center"
              button.style.height = "55px"
              button.style.width = "89px"
              button.style.color = "white"
              button.style.borderRadius = "8px"
              button.style.fontSize = "21px"
              button.style.cursor = "pointer"
              button.addEventListener("click", () => Helper.removeOverlay(overlay))
              buttons.append(button)
            }

            content.append(buttons)
          }
          overlay.append(content)
        })


      })
      .onInput(async() => {
        technischesHakFrei.withStorage(value => {
          funnel[technischesHakFrei.name] = value
          window.sessionStorage.setItem(storageName, JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel[name])
      technischesHakFrei.withStorage(value => {
        funnel[technischesHakFrei.name] = value
        window.sessionStorage.setItem(storageName, JSON.stringify(funnel))
      })
      fields.push(technischesHakFrei)


      const technischesZusatzInfo = new TextAreaField("technischesZusatzInfo", document.body)
      .withLabel(label => label.innerHTML = "Zusatzinformationen")
      .withType(textarea => {
        textarea.style.height = "144px"
        textarea.placeholder = "Ich habe einen Wintergarten, der bei der Montage abgedeckt werden soll.."
      })
      .onInput(async() => {
        technischesZusatzInfo.withStorage(value => {
          funnel[technischesZusatzInfo.name] = value
          window.sessionStorage.setItem(storageName, JSON.stringify(funnel))
        })
      })
      .fromStorage((name) => funnel[name])
      technischesZusatzInfo.withStorage(value => {
        funnel[technischesZusatzInfo.name] = value
        window.sessionStorage.setItem(storageName, JSON.stringify(funnel))
      })
      fields.push(technischesZusatzInfo)

    </script>

  </body>
</html>
